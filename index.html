<!DOCTYPE html>
<html>
<head>
  <title>D-T Fusion Simulation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>D-T Fusion Simulation</h1>

  <label for="temperature">Temperature (keV):</label>
  <input type="number" id="temperature" value="100"><br><br>

  <label for="density">Density (particles/cm³):</label>
  <input type="number" id="density" value="1e14"><br><br>

  <label for="time">Confinement Time:</label>
  <input type="number" id="timeValue" value="100">
  <select id="timeUnit">
    <option value="1e-9">nanoseconds</option>
    <option value="1e-6" selected>microseconds</option>
    <option value="1e-3">milliseconds</option>
    <option value="1">seconds</option>
  </select><br><br>

  <button onclick="runSimulation()">Run Simulation</button>

  <h2>Results:</h2>
  <p id="reactionRate"></p>
  <p id="powerOutput"></p>
  <p id="totalEnergy"></p>

<script>
function getCrossSection(temp_keV) {
  // Lookup table (barns converted to m²)
  const table = {
    10: 0.01e-28,
    20: 0.1e-28,
    30: 0.5e-28,
    40: 1e-28,
    50: 2e-28,
    60: 3e-28,
    70: 4e-28,
    80: 4.5e-28,
    90: 5e-28,
    100: 5e-28
  };

  if (table[temp_keV]) return table[temp_keV];

  // Interpolate between nearest multiples of 10
  let lower = Math.floor(temp_keV/10)*10;
  let upper = Math.ceil(temp_keV/10)*10;
  if (lower < 10) lower = 10;
  if (upper > 100) upper = 100;

  let sigmaLower = table[lower];
  let sigmaUpper = table[upper];
  let fraction = (temp_keV - lower) / (upper - lower);

  return sigmaLower + fraction * (sigmaUpper - sigmaLower);
}

function runSimulation() {
  let temp_keV = parseFloat(document.getElementById("temperature").value);
  let density_cm3 = parseFloat(document.getElementById("density").value);
  let density = density_cm3 * 1e6; // convert cm³ to m³
  let timeValue = parseFloat(document.getElementById("timeValue").value);
  let timeUnit = parseFloat(document.getElementById("timeUnit").value);
  let confinementTime = timeValue * timeUnit; // seconds

  // Constants
  let E = 2.82e-12; // J per reaction

  // Approximate velocity at given keV (non-relativistic)
  let v = Math.sqrt(2 * temp_keV * 1.602e-16 / (3.34e-27)); // m/s, using deuteron mass

  // Cross section
  let sigma = getCrossSection(temp_keV);

  // Reaction rate
  let R = density * density * sigma * v; // reactions/s/m³

  // Power output
  let P = R * E; // W/m³

  // Total energy
  let Etotal = P * confinementTime; // J/m³

  // Display
  document.getElementById("reactionRate").innerHTML = "Reaction Rate: " + R.toExponential(3) + " reactions/s/m³";
  document.getElementById("powerOutput").innerHTML = "Power Output: " + P.toExponential(3) + " W/m³";
  document.getElementById("totalEnergy").innerHTML = "Total Energy (over confinement): " + Etotal.toExponential(3) + " J/m³";
}
</script>
</body>
</html>
