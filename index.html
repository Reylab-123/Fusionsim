<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D-T Fusion Simulation (Physics-Based)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 700px; margin: auto; background: #f8f9fa;}
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, select, button { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; }
    .results { margin-top: 25px; background: #fff; padding: 15px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .error { color: red; }
  </style>
</head>
<body>

<h1>D-T Fusion Simulation (Physics-Based)</h1>

<label>Temperature (keV)</label>
<input type="number" id="temperature" value="20" min="1" step="any">

<label>Density (particles/cm³)</label>
<input type="number" id="density" value="1e14" min="1" step="any">

<label>Confinement Time</label>
<input type="number" id="timeValue" value="1" min="0" step="any">
<select id="timeUnit">
  <option value="1e-9">nanoseconds</option>
  <option value="1e-6">microseconds</option>
  <option value="1e-3">milliseconds</option>
  <option value="1">seconds</option>
</select>

<button onclick="runSimulation()">Run Simulation</button>

<div class="results">
  <p id="reactionRate"></p>
  <p id="powerOutput"></p>
  <p id="totalEnergy"></p>
  <p id="lawsonCheck"></p>
  <p id="errorMsg" class="error"></p>
</div>

<script>
function runSimulation() {
  document.getElementById("errorMsg").innerText = "";

  let T = parseFloat(document.getElementById("temperature").value);
  let dens_cm3 = parseFloat(document.getElementById("density").value);
  let timeVal = parseFloat(document.getElementById("timeValue").value);
  let timeUnit = parseFloat(document.getElementById("timeUnit").value);

  if (!T || !dens_cm3 || timeVal < 0) {
    document.getElementById("errorMsg").innerText = "Enter valid positive numbers.";
    return;
  }

  let density = dens_cm3 * 1e6; // cm³ → m³
  let tau = timeVal * timeUnit;

  // Realistic reactivity approximation: <σv> ≈ 1.1×10^-24 * T^2
  let sigmaV = 1.1e-24 * T * T; // m³/s

  // Reaction rate per volume: R = n^2 <σv>
  let R = density * density * sigmaV;

  // Energy per D-T reaction = 17.6 MeV ≈ 2.82e-12 J
  const E_per_reaction = 2.82e-12;

  let powerDensity = R * E_per_reaction;
  let totalEnergy = powerDensity * tau;

  let nTau = density * tau;

  // Lawson threshold from Wikipedia: ~1.5×10^20 m^-3·s
  const lawsonThreshold = 1.5e20;

  document.getElementById("reactionRate").innerText =
    "Reaction rate: " + R.toExponential(3) + " reactions/s/m³";

  document.getElementById("powerOutput").innerText =
    "Power density: " + powerDensity.toExponential(3) + " W/m³";

  document.getElementById("totalEnergy").innerText =
    "Total fusion energy (over confinement): " + totalEnergy.toExponential(3) + " J/m³";

  document.getElementById("lawsonCheck").innerText =
    "n·τ = " + nTau.toExponential(3) + " m⁻³·s (" +
    (nTau >= lawsonThreshold ? ">= ignition threshold" : "< ignition threshold") + ")";
}
</script>

</body>
</html>

