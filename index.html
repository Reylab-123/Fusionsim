<!DOCTYPE html>
<html>
<head>
  <title>Fusion Ignition Simulator</title>
  <style>
    body { background:#111; color:#eee; font-family:Arial; text-align:center; }
    input { margin:5px; padding:5px; }
    button { margin:10px; padding:10px; }
    .output { margin-top:20px; font-size:1.1em; }
  </style>
</head>
<body>
  <h1>Fusion Ignition Simulator ğŸ”¥â„</h1>
  <p>Shoutout to Eternity, Infinity, Death</p>
  <p>Enter plasma parameters:</p>
  <input id="temp" type="number" placeholder="Temperature (keV)">
  <input id="dens" type="number" placeholder="Density (particles/cmÂ³)">
  <input id="tau" type="number" placeholder="Confinement time (s)">
  <button onclick="simulate()">Run</button>

  <div class="output" id="result"></div>

<script>
  // Boschâ€“Hale 1992 Dâ€“T exact parametrization

function boschHale_DT(T) {
  const BG = 34.3827;
  const mrc2 = 1124656; // keV

  const C1 = 1.17302e-9;
  const C2 = 1.51361e-2;
  const C3 = 7.51886e-2;
  const C4 = 4.60643e-3;
  const C5 = 1.35e-2;
  const C6 = -1.06750e-4;
  const C7 = 0.0;

  // theta correction
  const numerator = T * (C2 + T * (C4 + T * C6));
  const denominator = 1 + T * (C3 + T * (C5 + T * C7));

  const theta = T / (1 - numerator / denominator);

  // xi parameter
  const xi = Math.pow((BG * BG) / (4 * theta), 1/3);

  // final reactivity
  return C1 *
         theta *
         Math.sqrt(xi / (mrc2 * Math.pow(T, 3))) *
         Math.exp(-3 * xi);
}

// Test
console.log(boschHale_DT(10));


// --- Bremsstrahlung loss power density ---
function bremsstrahlungLoss(n, TkeV) {
  let coeff = 1.69e-38; // WÂ·m^3 scaling
  let Z = 1; // effective charge for Dâ€“T plasma
  return coeff * Z*Z * n*n * Math.sqrt(TkeV);
}

// --- Simulation ---
function simulate() {
  let T = parseFloat(document.getElementById("temp").value);
  let n_cm = parseFloat(document.getElementById("dens").value);
  let tau = parseFloat(document.getElementById("tau").value);

  if (isNaN(T) || isNaN(n_cm) || isNaN(tau) || T<=0 || n_cm<=0 || tau<=0) {
    document.getElementById("result").innerHTML = "Enter valid positive values.";
    return;
  }

  let n = n_cm * 1e6; // convert cm^-3 to m^-3
  let tripleProduct = n * T * tau;

  // Boschâ€“Hale reactivity
  let sigmaV = boschHale_DT(T);

  // Reaction rate (Dâ€“T mixture factor 0.25)
  let R = 0.25 * n*n * sigmaV;

  // Fusion energy per reaction (17.6 MeV)
  let E_DT = 17.6e6 * 1.602e-19; // J
  let Pfusion = R * E_DT; // W/m^3

  // Alpha self-heating (3.5 MeV captured)
  let E_alpha = 3.5e6 * 1.602e-19; // J
  let Palpha = R * E_alpha; // W/m^3

  // Bremsstrahlung losses
  let Ploss = bremsstrahlungLoss(n, T);

  // Wikipedia triple product threshold
  let threshold = 1e21; // keVÂ·m^-3Â·s

  // Verdicts
  let verdictBenchmark = (tripleProduct >= threshold) ? "ğŸ”¥ IGNITION (benchmark)" : "â„ BELOW IGNITION (benchmark)";
  let verdictBalance = (Pfusion > Ploss) ? "ğŸ”¥ NET POWER BALANCE (fusion > losses)" : "â„ LOSSES DOMINATE";

  // Output
  document.getElementById("result").innerHTML =
    "Triple product: " + tripleProduct.toExponential(3) + " keVÂ·mâ»Â³Â·s<br>" +
    "Threshold: " + threshold.toExponential(3) + " keVÂ·mâ»Â³Â·s<br>" +
    verdictBenchmark + "<br><br>" +
    "Boschâ€“Hale reactivity: " + sigmaV.toExponential(3) + " mÂ³/s<br>" +
    "Reaction rate: " + R.toExponential(3) + " reactions/mÂ³Â·s<br>" +
    "Fusion power density: " + Pfusion.toExponential(3) + " W/mÂ³<br>" +
    "Alpha self-heating: " + Palpha.toExponential(3) + " W/mÂ³<br>" +
    "Bremsstrahlung losses: " + Ploss.toExponential(3) + " W/mÂ³<br>" +
    verdictBalance;
}
</script>
</body>
</html>
