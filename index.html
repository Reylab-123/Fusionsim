<!DOCTYPE html>
<html>
<head>
  <title>Fusion Ignition Simulator</title>
  <style>
    body { background:#111; color:#eee; font-family:Arial; text-align:center; }
    input { margin:5px; padding:5px; }
    button { margin:10px; padding:10px; }
    .output { margin-top:20px; font-size:1.1em; }
  </style>
</head>
<body>
  <h1>Fusion Ignition Simulator ğŸ”¥â„</h1>
  <p>Shoutout to Eternity, Infinity, Death</p>
  <p>Enter plasma parameters:</p>
  <input id="temp" type="number" placeholder="Temperature (keV)">
  <input id="dens" type="number" placeholder="Density (particles/cmÂ³)">
  <input id="tau" type="number" placeholder="Confinement time (s)">
  <button onclick="simulate()">Run</button>

  <div class="output" id="result"></div>

<script>
// --- Correct Boschâ€“Hale reactivity fit for Dâ€“T ---
function boschHaleSigmaV(TkeV) {
  // Bosch & Hale (1992) parametrization for D-T fusion
  // TkeV = plasma temperature in keV

  // Constants for D-T reaction (fit coefficients)
  const A1 = 6.927e-1;
  const A2 = 7.454e-3;
  const A3 = -4.799e-5;
  const A4 = 1.855e-7;
  const A5 = -2.991e-10;
  const B  = 34.3827; // Gamow energy parameter (keV)

  // Dimensionless temperature variable
  let x = TkeV / (1.0 + TkeV / 1000.0);

  // Polynomial correction
  let poly = A1 + A2*x + A3*x**2 + A4*x**3 + A5*x**4;

  // Reactivity (m^3/s)
  let sigmaV = 1e-24 * poly * Math.exp(-B / Math.pow(TkeV, 1/3));
  return sigmaV;
}

// --- Bremsstrahlung loss power density ---
function bremsstrahlungLoss(n, TkeV) {
  // n in m^-3, T in keV
  let coeff = 1.69e-38; // WÂ·m^3 scaling
  let Z = 1; // effective charge for Dâ€“T plasma
  return coeff * Z*Z * n*n * Math.sqrt(TkeV);
}

// --- Simulation ---
function simulate() {
  let T = parseFloat(document.getElementById("temp").value);
  let n_cm = parseFloat(document.getElementById("dens").value);
  let tau = parseFloat(document.getElementById("tau").value);

  if (isNaN(T) || isNaN(n_cm) || isNaN(tau) || T<=0 || n_cm<=0 || tau<=0) {
    document.getElementById("result").innerHTML = "Enter valid positive values.";
    return;
  }

  let n = n_cm * 1e6; // convert cm^-3 to m^-3
  let tripleProduct = n * T * tau;

  // Boschâ€“Hale reactivity
  let sigmaV = boschHaleSigmaV(T);

  // Reaction rate (Dâ€“T mixture factor 0.25)
  let R = 0.25 * n*n * sigmaV;

  // Fusion energy per reaction (17.6 MeV)
  let E_DT = 17.6e6 * 1.602e-19; // J
  let Pfusion = R * E_DT; // W/m^3

  // Alpha self-heating (3.5 MeV captured)
  let E_alpha = 3.5e6 * 1.602e-19; // J
  let Palpha = R * E_alpha; // W/m^3

  // Bremsstrahlung losses
  let Ploss = bremsstrahlungLoss(n, T);

  // Wikipedia triple product threshold
  let threshold = 1e21; // keVÂ·m^-3Â·s

  // Verdicts
  let verdictBenchmark = (tripleProduct >= threshold) ? "ğŸ”¥ IGNITION (benchmark)" : "â„ BELOW IGNITION (benchmark)";
  let verdictBalance = (Pfusion > Ploss) ? "ğŸ”¥ NET POWER BALANCE (fusion > losses)" : "â„ LOSSES DOMINATE";

  // Output
  document.getElementById("result").innerHTML =
    "Triple product: " + tripleProduct.toExponential(3) + " keVÂ·mâ»Â³Â·s<br>" +
    "Threshold: " + threshold.toExponential(3) + " keVÂ·mâ»Â³Â·s<br>" +
    verdictBenchmark + "<br><br>" +
    "Boschâ€“Hale reactivity: " + sigmaV.toExponential(3) + " mÂ³/s<br>" +
    "Reaction rate: " + R.toExponential(3) + " reactions/mÂ³Â·s<br>" +
    "Fusion power density: " + Pfusion.toExponential(3) + " W/mÂ³<br>" +
    "Alpha self-heating: " + Palpha.toExponential(3) + " W/mÂ³<br>" +
    "Bremsstrahlung losses: " + Ploss.toExponential(3) + " W/mÂ³<br>" +
    verdictBalance;
}
</script>
</body>
</html>
